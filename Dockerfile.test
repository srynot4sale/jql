FROM python:3.7-slim

MAINTAINER Aaron Barnes <aaron@io.nz>

RUN adduser --system --no-create-home --disabled-login jql
ENV PYTHONUNBUFFERED=1

RUN apt-get update && \
    apt-get upgrade -y && \
    apt-get install -y python3-pip python3-dev

ENV PYTHONPATH="/code/:${PYTHONPATH}"

CMD ["python3", "test.py"]

ADD requirements.txt /tmp/

RUN mkdir /code
WORKDIR /code

RUN pip install -r /tmp/requirements.txt

COPY *.py /code/

USER jql
